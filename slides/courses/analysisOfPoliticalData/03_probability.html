<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Probability Theory</title>
    <meta charset="utf-8" />
    <meta name="author" content="Yue Hu" />
    <script src="03_probability_files/header-attrs-2.3.8/header-attrs.js"></script>
    <script src="03_probability_files/htmlwidgets-1.5.1/htmlwidgets.js"></script>
    <script src="03_probability_files/viz-1.8.2/viz.js"></script>
    <link href="03_probability_files/DiagrammeR-styles-0.2/styles.css" rel="stylesheet" />
    <script src="03_probability_files/grViz-binding-1.0.6.1/grViz.js"></script>
    <link rel="stylesheet" href="zh-CN_custom.css" type="text/css" />
    <link rel="stylesheet" href="styles.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Probability Theory
## Analysis of Political Data (70700173)
### Yue Hu
### Political Science, Tsinghua University

---


## Overview


* What's probability?
* Calculating probabilities
* Presenting probabilities
* Distribution

---

class: inverse, bottom

# Probability

---

## Probability: A Belief

* Determinist event: Pr = 0/1

--

* Probabilist event: Pr &amp;in; [0, 1]

--

.left-column[&lt;img src="images/tangSeng.jpg" height = 300 /&gt;]

.right-column[&lt;img src="images/multiverse_rickMordy.jpg" height = 300 /&gt;]

---

## What Dose the "Pr" Mean

--

### Classic ("objective") view:

"Coin has two sides, balance" &amp;rarr; Pr(head) = 0.5.

--

### Relative frequency view 

You are observing a random sample.

`$${\displaystyle \lim_{n\to \infty}f(x)/n}$$`

(The larger the better

--

### Subjective view

Bayesian, based on beliefs (prior), game theory

---

## How Do We Know the Probability: 

1. Sample Point Method
    + Sample space
    + Sampling replacement
1. Event Composition Method
    + Permutation
    + Combination

---

Sample Space

Space of all possible outcomes

--

Rules:

1. &amp;sum; Pr = 1
1. All of the probability constitute the probability distribution
1. For all event in the space, `\(P(E) + P(\tilde E) = 1\)`

???

Two ways to know the probability, but first to know what's sample space is.


---

## Sample Point Method

Get the probability of an event,

--

1. Define experiment event;
1. Define sample space;
1. Assign probabilities, P(E&lt;sub&gt;i&lt;/sub&gt;) &amp;GreaterEqual; 0, &amp;sum; P(E&lt;sub&gt;i&lt;/sub&gt;) = 1;
1. Define event of interest, A;
1. Find Pr(A) by summing probability of A.

---

## Sampling Replacements

W/o means once picked, it won't be sampled again. 

--

Infinite population (or extremely large sample):

Little difference between sampling with and without replacement). 

---

When the population is finite, the variability of the sample is actually less than expected &amp;rarr;

Finite population correction: Account for this greater efficiency in the sampling process. 

$$ FPC = \sqrt{\frac{N - n}{N - 1}}$$

---

e.g., Through a dice for five times: 

w. replacement: `\(6^5\)`

w.o. replacement: `\(P(6, 5) = \frac{6!}{(6 - 5)!}.\)` (n! factorial)

--

Q. Is survey sampling a w. or w.o. sampling? 

???

w.o.

---

## Event Composition Method (ECM)

Determine the probabilities by the application of .red[multiplicative and additive] rules.

--
E&lt;sub&gt;1&lt;/sub&gt;: m outcomes, E&lt;sub&gt;2&lt;/sub&gt;: n outcomes, therefore there are `\(m\times n\)` possible outcome for E&lt;sub&gt;1&lt;/sub&gt;E&lt;sub&gt;2&lt;/sub&gt;. 

--

e.g., A car dealer has 6 models, 8 colors, and 3 financial plans. How many package? 

--

6 &amp;times; 8 &amp;times; 3 = 144.

---

## Tools for ECM: Permutation and Combination

Ordered: `\(P(n, r) = \frac{n!}{(n - r)!}.\)`

Order doesn't matter: `\({n \choose r} = \frac{n!}{r!(n - r)!}.\)`

---

## Rules for ECM (Compound Event)

Event G and H

* Union: G&amp;cup;H = `\(\{S_i: S_i\in G\ or\ S_i\in H\}\)`
    + P(G&amp;cup;H) = P(G) + P(H) - P(G)&amp;cap;P(H).
* Intersection: G&amp;cap;H = `\(\{S_i: S_i\in G\ and\ S_i\in H\}\)`
* Exclusive: G&amp;cap;H = &amp;empty;
* Complement: J &amp;sub; -G &amp;cap; H
* Conditional: `\(P(H|G) = \frac{P(G\cap H)}{P(G)}\)`
* Independent: P(H|G) = P(H); P(G&amp;cap;H) = P(G)P(H)


---

## Beyond the Chance: Alternative Ways

1. Relative risk
1. Odds Ratio
1. Bayesian method

---

## Relative Risk

* `\(\hat{\pi}_{1|1}/\hat{\pi}_{1|2} = \frac{n_{11}/n_{\bullet 1}}{n_{12}/n_{\bullet 2}}\)`

e.g., A hospital investigated whether drinking has a relation with fatal illness. Here's the counts:

| Drinking 	| Fatal 	| Nonfatal 	|
|----------	|-------	|----------	|
| Yes      	| 1,601  	| 162,527   	|
| No       	| 510   	| 412,368   	|

`\(Risk_{fatal} = \frac{1601/(1601 + 162527)}{510/(510 + 412368)} = 7.897\)`

???

That is, when people drink, they are 7.9 more times to die in a fatal accident than w/o.

---

## Odds Ratio

`$$\begin{align}
O_{12} =&amp; \frac{\pi_{1|1}/\pi_{1|2}}{\pi_{2|1}/\pi_{2|2}} \\
 =&amp; \frac{n_{11}/n_{12}}{n_{21}/n_{22}} \\
 =&amp; n_{11}n_{22}/n_{21}n_{12}
\end{align}$$`

---

e.g., A hospital investigated whether drinking has a relation with fatal illness. Here's the counts:

| Drinking 	| Fatal 	| Nonfatal 	|
|----------	|-------	|----------	|
| Yes      	| 1,601  	| 162,527   	|
| No       	| 510   	| 412,368   	|

`\(O_{fatal} = \frac{1601/510}{162527/412368}\)` = 7.965


???

The fatal risk of wearing a belt is 8 times larger than not

--

Bonus:  Log odds

???

Log odds, Logit, mapping the range (0,1) to (-&amp;infin;, +&amp;infin;) using log of odds, a.k.a., "logistic unit"


If independent, then log odds = 0.


---

RR vs. OR

.center[&lt;img src="images/rrOr.png" height = 300 /&gt;]

* For rare cases, both ok.
* For common cases, RR is better.

---

## Evolutionary View of Probability: Bayes' Theorem

$$
`\begin{aligned}
P(A|B)P(B) =&amp; P(B|A)P(A) = P(A\cap B)\\
             P(A|B)=&amp; \frac{P(B|A)P(A)}{P(B)}\\
                   =&amp; \frac{P(B|A)P(A)}{P(B|A)P(A) + P(B|\tilde A)P(\tilde A)}
\end{aligned}`
$$

???

1. Conjugate prior: posterior distribution = prior distribution
1. Cromwell's rule: if a region of the parameter space has 0 prior probability, then it also has 0 posterior probability. 
 
---

class: small

e.g.1: Let's assume Idle Fish provides a verification function for buyers based on machine-learning techniques, and .red[30%] of the products were knockoff in the platform. When people bring a product to verify, the system can tell .red[90%] knockoff  knockoff, and .navy[80%] authentic products authentic. Then, what's the probability that a product is knockoff if the verification system said so?

--

.right-column[
`$$\begin{align}
&amp; P(K|VK) \\
=&amp; \frac{P(VK|K)P(K)}{P(VK|K)P(K) + P(VK|\tilde K)P(\tilde K)} \\
=&amp; \frac{.9 * .3}{.9 * .3 + .2*.7} = .659.
\end{align}$$`
]

--

.left-column[
<div id="htmlwidget-b5f6e2bf76b016d590d8" style="width:504px;height:504px;" class="grViz html-widget"></div>
<script type="application/json" data-for="htmlwidget-b5f6e2bf76b016d590d8">{"x":{"diagram":"\ndigraph usedCar {\n\n  # a \"graph\" statement\n  graph [overlap = true, fontsize = 10]\n\n  # several \"node\" statements\n  node [shape = circle,\n        fixedsize = true,\n        width = 0.9] // sets as circles\n  N[label = \"Nature\"];\n  MF[label = \"Verify\"];\n  MS[label = \"Verify\"];\n  RFF[label = \"Result\"];\n  RFS[label = \"Result\"];\n  RSF[label = \"Result\"];\n  RSS[label = \"Result\"]\n\n  # several \"edge\" statements\n  N -> MF[label=\"K: .3\"]\n  N -> MS[label=\"A: .7\"]\n  MF -> RFF[label=\"K: .9\"]\n  MF -> RFS[label=\"A: .1\"]\n  MS -> RSF[label=\"K: .2\"]\n  MS -> RSS[label=\"A: .8\"]\n  \n}\n","config":{"engine":"dot","options":null}},"evals":[],"jsHooks":[]}</script>
]

---

## Why Baysian Estimation?

&lt;video width="700" height="500" controls&gt;
    &lt;source src="images/bayesianApplication.mp4" type="video/mp4"&gt;
&lt;/video&gt;


---

## Bayesian vs. Frequentist

1. Repeated sample and sample distribution: When the population data are collected, the repeat-sample makes no sense.
1. Future event: It is impossible to have repeat samples for future


---

## Special: Correction

### Bayes' Theorem

$$
`\begin{aligned}
P(A|B)=&amp; \frac{P(B|A)P(A)}{P(B)}\\
     =&amp; \frac{P(B|A)P(A)}{P(B|A)P(A) + P(B|\tilde A)P(\tilde A)}
\end{aligned}`
$$

### Level of measurement:

+ Interval 
    + Zero is a terminal
+ Ratio
    + Zero means absence

???

feeling thermometer: 0-200，冷淡到热情, 0是非常极端的情绪，不代表没有
-100-0-100， 0代表0的意思，ratio 是唯一一种scale可以表示meaningful ratio

在-100-0-100，按10，30 （1：3）取值，放回0-200，110:130, 不是ratio

---

## Puting Probability Together: Distribution

(Probability) distribution: 

The mathematical .red[function] that gives the probabilities of occurrence of different possible .red[outcomes] for an .red[experiment].

--

What probability method is using here?

???

Sample point method. 

--

Is a distribution built upon w. or w/o replacement?

???

Both work.

---

## The Jargon Family of Distribution


### Marginal and joint totals: 

`$$\begin{align} 
n_{i\bullet} =&amp; \sum_j n_{ij}; n_{\bullet j} = \sum_i n_{ij}; \\
n_{\bullet\bullet} =&amp; \sum\sum n_{ij}.
\end{align}$$`

---

### Marginal and joint distributions

Marginal: 

`$$\begin{align}
\pi_{i\bullet} =&amp; \sum_j \pi_{ij}, \hat{\pi_{i\bullet}} =  n_{i\bullet}/n_{\bullet\bullet}; \\
\pi_{\bullet j} =&amp; \sum_i \pi_{ij}, \hat{\pi_{\bullet j}} =  n_{\bullet j}/n_{\bullet\bullet}.
\end{align}$$`

Joint: `\(\pi_{\bullet\bullet}\)` = &amp;sum;&amp;sum; &amp;pi;&lt;sub&gt;ij&lt;/sub&gt; = 1.

---

e.g., Do you think Kamala Harris is a qualified VP? 

| Gender 	| Yes 	| No 	| Total 	|
|--------	|-----	|----	|-------	|
| Male   	| 5   	| 12 	| 17    	|
| Female 	| 6   	| 5  	| 11    	|
| Total  	| 11  	| 17 	| 28    	|

What's the probability for Female who don't agree?

???

Kamala Harris, Senator from California, announced VP in 20120

---

### Conditional distribution

`$$\pi_{i|j} = \pi_{ij} / \pi_{\bullet j};$$`
`$$\hat{\pi_{i|j}} = n_{ij}/n_{\bullet j}$$`
---

e.g., Do you think Kamala Harris is a qualified VP? 

| Gender 	| Yes 	| No 	| Total 	|
|--------	|-----	|----	|-------	|
| Male   	| 5   	| 12 	| 17    	|
| Female 	| 6   	| 5  	| 11    	|
| Total  	| 11  	| 17 	| 28    	|


Probability of "yes" given the respondent is a male.

???

Conditional: `\(P(Y|M) = 5/17\)`

---

## Independent Event (Again)

`\(P(X\cap Y) = P(X)P(Y); P(Y|X) = P(X).\)`

Such event's probability is: 

* Population: `\(\pi_i = n_i/N\)`
* Sample: `\(\hat{\pi_i} = n_i/n_{\bullet\bullet}.\)`

---

e.g., Do you think Kamala Harris is a qualified VP? 

| Gender 	| Yes 	| No 	| Total 	|
|--------	|-----	|----	|-------	|
| Male   	| 5   	| 12 	| 17    	|
| Female 	| 6   	| 5  	| 11    	|
| Total  	| 11  	| 17 	| 28    	|


Are gender and approval independent? 

--

Pr(MY) = .navy[11/28 &amp;times; 17/28] &amp;ne; 5/28

.navy[11/28 &amp;times; 17/28]: .red[Expected value for independence]



???

`\(\chi^2 = \sum(\frac{Observation - Expected}{Expected})^2.\)`


---

## Wrap Up

.left-column[
* What's probability?
    + Classic
    + Relative
    + Subjective
* Calculating probabilities
    + Single event
    + Compound events
    ]

--

.right-column[ 

* Presenting probs
    + Chance
    + Relative risks
    + Odds
    + Bayesian estimates
* Distribution
    + Marginal, joint, conditional
    + Independence
    ]
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_HTMLorMML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
